[General]
description = "multiple UAVs hovering"
#scheduler-class = "inet::RealTimeScheduler"

cmdenv-status-frequency = 10s
cmdenv-output-file = "${resultdir}/${runnumber}.out"

# Visualizer settings
#mobilityDrones.visualizer.osgVisualizer.typename = "IntegratedOsgVisualizer"
#mobilityDrones.visualizer.osgVisualizer.sceneVisualizer.typename = "SceneOsgEarthVisualizer"
#mobilityDrones.visualizer.osgVisualizer.sceneVisualizer.mapFile = "map.earth"
#mobilityDrones.visualizer.osgVisualizer.sceneVisualizer.sceneImageSize = 10000m
**.sceneMinX = -10000m
**.sceneMinY = -10000m
**.sceneMinZ = -10000m
**.sceneMaxX = 10000m
**.sceneMaxY = 10000m
**.sceneMaxZ = 10000m

**.wlan[0].radio.displayCommunicationRange = true
#*.visualizer.*.physicalLinkVisualizer.displayLinks = true
#*.visualizer.*.dataLinkVisualizer.displayLinks = true
#*.visualizer.*.networkRouteVisualizer.displayRoutes = true
#*.visualizer.*.*LinkVisualizer.lineShift = 0
#*.visualizer.*.networkRouteVisualizer.lineShift = 0

# network node visualization: disable labels
*.visualizer.osgVisualizer.networkNodeVisualizer.displayModuleName = true

# enable drone load visualization
*.visualizer.*.statisticVisualizer.signalName = "dataLoad"
*.visualizer.*.statisticVisualizer.format = "(%v)"
*.visualizer.*.statisticVisualizer.textColor = "red"
*.visualizer.*.statisticVisualizer.font = "Courier New, 12px, bold"
*.visualizer.*.statisticVisualizer.opacity = 1
#*.visualizer.base.statisticVisualizer.sourceFilter = "*.quads[*].** *.groundStation.** *.sensors[*].**"

# mobility visualization
*.visualizer.*.mobilityVisualizer.displayMobility = true # master switch
*.visualizer.*.mobilityVisualizer.displayPositions = true
*.visualizer.*.mobilityVisualizer.displayOrientations = true
*.visualizer.*.mobilityVisualizer.displayVelocities = true
*.visualizer.*.mobilityVisualizer.displayMovementTrails = true
*.visualizer.*.mobilityVisualizer.animationSpeed = 10


# mobility constraint area
**.constraintAreaMinX = -10000m
**.constraintAreaMinY = -10000m 
**.constraintAreaMinZ = -10000m
**.constraintAreaMaxX = 10000m
**.constraintAreaMaxY = 10000m
**.constraintAreaMaxZ = 10000m


# Coordinates of the scene origin on the map
#BSB
#*.coordinateSystem.sceneLatitude = -15.84584deg
#*.coordinateSystem.sceneLongitude = -47.93052deg
#*.coordinateSystem.sceneHeading = 90deg

#PUC
#*.coordinateSystem.sceneLongitude = -43.22260deg
#*.coordinateSystem.sceneLatitude = -22.97556deg
#*.coordinateSystem.sceneHeading = 90deg # scene orientation

#Campo
*.coordinateSystem.sceneLongitude = -47.926634deg
*.coordinateSystem.sceneLatitude = -15.840075deg
*.coordinateSystem.sceneHeading = 0deg # scene orientation

#environment
*.environment.ground.typename = "FlatGround"
*.quads[*].osgModel = "3d/drone.ive.10.scale.0,0,90.rot"
**.mobility.initFromDisplayString = false


*.sensor*.wlan[0].radio.energyConsumer.typename = "SensorStateBasedEpEnergyConsumer"
*.sensor*.wlan[0].radio.energyConsumer.offPowerConsumption = 0mW
*.sensor*.wlan[0].radio.energyConsumer.sleepPowerConsumption = 1mW
*.sensor*.wlan[0].radio.energyConsumer.switchingPowerConsumption = 1mW
*.sensor*.wlan[0].radio.energyConsumer.receiverIdlePowerConsumption = 2mW
*.sensor*.wlan[0].radio.energyConsumer.receiverBusyPowerConsumption = 5mW
*.sensor*.wlan[0].radio.energyConsumer.receiverReceivingPowerConsumption = 10mW
*.sensor*.wlan[0].radio.energyConsumer.transmitterIdlePowerConsumption = 2mW
*.sensor*.wlan[0].radio.energyConsumer.transmitterTransmittingPowerConsumption = 100mW
*.sensor*.energyStorage.typename = "IdealEpEnergyStorage"

*.sensor*.wlan[0].radio.displayInterferenceRange = false

[Config Wifi]
network = GradysNetwork
description = "Config for wifi only communication"

# Quad networking:
*.quads[*].numApps = 1
*.quads[*].app[0].typename = "UdpCommunicationApp"
*.quads[*].app[0].localPort = 1000
*.quads[*].app[0].destPort = 1000
*.quads[*].app[0].sendInterval = 1s
*.quads[*].app[0].startTime =1s
*.quads[*].app[0].stopTime = -1s
*.quads[*].app[0].messageLength = 1454Byte
*.quads[*].protocol.typename = "DadcaProtocol"
*.quads[*].mobility.typename = "DroneMobility"
*.quads[*].mobility.coordinateSystemModule = "coordinateSystem" # Empty if the drone should follow Euclidean coordinates or "coordinateSystem" if it should follow coordinates
*.quads[*].mobility.waypointFile = "paths/voo_ar.waypoints"
*.quads[*].mobility.waypointProximity = 1m
*.quads[*].mobility.speed = 10mps
*.quads[*].mobility.homeLatitude = -15.840068deg
*.quads[*].mobility.homeLongitude = -47.926633deg

# Ground station configs
*.groundStation.mobility.typename = "StationaryMobility"
*.groundStation.mobility.coordinateSystemModule = "coordinateSystem"
*.groundStation.numApps = 1
*.groundStation.app[0].typename = "UdpCommunicationApp"
*.groundStation.app[0].destPort = 1000
*.groundStation.app[0].localPort = 1000
*.groundStation.app[0].sendInterval = 1s
*.groundStation.app[0].messageLength = 1454Byte
*.groundStation.app[0].startTime = 130s

*.groundStation.protocol.typename = "DadcaProtocolGround"
*.groundStation.mobility.initialLatitude = -15.840068deg
*.groundStation.mobility.initialLongitude = -47.926633deg
*.groundStation.mobility.initialAltitude = 0m

# General sensor and ground station configurations
*.numSensors = 8
*.sensors[*].numApps = 1
*.sensors[*].mobility.typename = "StationaryMobility"  
*.sensors[*].mobility.coordinateSystemModule = "coordinateSystem"
*.sensors[*].app[0].typename = "UdpCommunicationApp"
*.sensors[0..2].protocol.typename = "DadcaProtocolSensor"
*.sensors[*].app[0].destPort = 1000
*.sensors[*].app[0].localPort = 1000
*.sensors[*].app[0].sendInterval = 8s
*.sensors[*].app[0].startTime = exponential(1s)
*.sensors[*].app[0].messageLength = 1454Byte
*.sensors[*].mobility.initialAltitude = 0m
*.sensors[0].mobility.initialLatitude = -15.84245230deg
*.sensors[0].mobility.initialLongitude = -47.92948720deg
*.sensors[1].mobility.initialLatitude = -15.84262780deg
*.sensors[1].mobility.initialLongitude = -47.92650460deg
*.sensors[2].mobility.initialLatitude = -15.84161630deg
*.sensors[2].mobility.initialLongitude = -47.92395110deg

*.sensors[3].mobility.initialLatitude = -15.8436264deg
*.sensors[3].mobility.initialLongitude = -47.9270250deg
*.sensors[4].mobility.initialLatitude = -15.8406461deg
*.sensors[4].mobility.initialLongitude = -47.9240263deg
*.sensors[5].mobility.initialLatitude = -15.8416370deg
*.sensors[5].mobility.initialLongitude = -47.9227066deg
*.sensors[6].mobility.initialLatitude = -15.8437115deg
*.sensors[6].mobility.initialLongitude = -47.9259145deg
*.sensors[7].mobility.initialLatitude = -15.8437425deg
*.sensors[7].mobility.initialLongitude = -47.9246378deg

[Config NewMap]
extends = Wifi
*.numSensors = 10
*.quads[*].mobility.speed = 5mps
*.quads[*].mobility.homeLatitude = -15.8404568deg
*.quads[*].mobility.homeLongitude = -47.926633deg
*.quads[*].protocol.typename = "SimpleDroneProtocol"
*.quads[*].protocol.timeoutDuration = 1s
*.quads[*].app[0].sendInterval = 1s
*.quads[*].app[0].destAddresses = "sensors[0] sensors[1] sensors[2] sensors[3] sensors[4] sensors[5] sensors[6] sensors[7] sensors[8] sensors[9]"
*.quads[*].numFailures = 0
#*.quads[*].failures[0].typename="SimpleTimerEnergy"
#*.quads[*].failures[0].batteryShutdownDuration = 30min
#*.quads[*].failures[0].batteryRTLDuration = 25min
#*.quads[*].failures[0].rechargeDuration = -1s


#**.wlan[0].radio.typename = "Ieee80211ScalarRadio"
#*.radioMedium.typename = "Ieee802154NarrowbandScalarRadioMedium"
# settings for ScalarRadio
#**.wlan[0].radio.transmitter.power = 3mW

#*.radioMedium.pathLoss.typename = "TwoRayNewModel"

*.sensors[*].protocol.typename = "SimpleSensorProtocol"
*.sensors[*].protocol.payloadSize = 1
*.sensors[*].app[0].destAddresses = "quads[0]"
*.sensors[0].mobility.initialLatitude = -15.839695565862263deg
*.sensors[0].mobility.initialLongitude=-47.926282323896885deg 
*.sensors[1].mobility.initialLatitude = -15.839025637959622deg 
*.sensors[1].mobility.initialLongitude=-47.926336638629444deg 
*.sensors[2].mobility.initialLatitude = -15.839130465534483deg 
*.sensors[2].mobility.initialLongitude=-47.92686972767115deg 
*.sensors[3].mobility.initialLatitude = -15.839286255337507deg
*.sensors[3].mobility.initialLongitude= -47.92742360383273deg
*.sensors[4].mobility.initialLatitude = -15.839474622143825deg
*.sensors[4].mobility.initialLongitude=-47.92789801955223deg
*.sensors[5].mobility.initialLatitude = -15.839765558201474deg
*.sensors[5].mobility.initialLongitude=-47.92838953435421deg
*.sensors[6].mobility.initialLatitude = -15.839229809770595deg
*.sensors[6].mobility.initialLongitude=-47.9285541549325deg
*.sensors[7].mobility.initialLatitude = -15.838679545303021deg
*.sensors[7].mobility.initialLongitude=-47.92844519019127deg
*.sensors[8].mobility.initialLatitude = -15.838461825946736deg
*.sensors[8].mobility.initialLongitude=-47.927931882441044deg
*.sensors[9].mobility.initialLatitude = -15.838123150926deg
*.sensors[9].mobility.initialLongitude=-47.927566766738884deg

*.groundStation.protocol.typename = "CommunicationProtocolBase"
# Placing groundStation way out of the map
*.groundStation.mobility.initialLatitude = -15.845695565862263deg
*.groundStation.mobility.initialLongitude = -47.926282323896885deg 
*.groundStation.mobility.initialAltitude = 0m

# Setting up all runs
sim-time-limit=1800s
*.quads[*].mobility.waypointFile = "paths/voo_mapa_novo20.waypoints"

[Config Sim2drone-Wifi-Zigzag]
extends=Wifi
description="Simulation with two drones with wifi radio only"
*.numUAVs = 2
*.quads[0].app[0].destAddresses = "quads[1] sensors[0] sensors[1] sensors[2] groundStation"
*.quads[1].app[0].destAddresses = "quads[0] sensors[0] sensors[1] sensors[2] groundStation"
*.quads[*].protocol.timeoutDuration = 20s
*.quads[*].protocol.typename = "ZigzagProtocol"
*.groundStation.protocol.typename = "ZigzagProtocol"
*.sensors[*].protocol.typename = "ZigzagProtocolSensor"
*.quads[0].mobility.startTime = 0s
*.quads[1].mobility.startTime = 40s
*.quads[0].app[*].startTime = normal(1s, 1s)
*.quads[1].app[*].startTime = normal(40s, 1s)

*.sensors[*].app[0].destAddresses = "quads[0] quads[1]"

*.groundStation.app[0].destAddresses = "quads[0] quads[1]"
